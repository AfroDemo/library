import{q as I,r as a,j as e,$ as B,m}from"./app-B3QjrgfE.js";import{A as U,T as G}from"./app-layout-DBHVPZfr.js";import{c as K}from"./createLucideIcon-Z2OSLAlR.js";import{S as R}from"./search-DKArdvs_.js";import{S as H}from"./square-pen-CXEVN1nP.js";import{T as J}from"./trash-2-Dd7aZBoZ.js";import"./app-logo-icon-BOS49W9v.js";import"./index-CMzxVQNP.js";import"./index--B1BczC_.js";import"./chevron-right-bRrSZfP4.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],S=K("MapPin",Q),V=[{title:"Dashboard",href:"/dashboard"},{title:"Manage Locations",href:"/admin/location"}];function oe(){const{shelves:n,filters:$,errors:t,success:p}=I().props,[g,C]=a.useState($.search||""),[A,y]=a.useState([]),[D,h]=a.useState(!1),[M,u]=a.useState(!1),[c,j]=a.useState(null),[o,_]=a.useState(null),[l,b]=a.useState({floor:"",shelf_number:"",description:""}),[i,v]=a.useState({}),[N,d]=a.useState(!1);a.useEffect(()=>{p&&x("success",p),t&&Object.values(t).length>0&&Object.values(t).forEach(s=>x("error",s))},[p,t]);const x=(s,r)=>{const f=Date.now().toString();y(w=>[...w,{type:s,message:r,id:f}]),setTimeout(()=>y(w=>w.filter(z=>z.id!==f)),5e3)},O=s=>{y(r=>r.filter(f=>f.id!==s))},k=()=>{m.get(route("admin.shelves.index"),{search:g},{preserveState:!0,replace:!0})},P=s=>{s&&m.get(s,{search:g},{preserveState:!0})},E=(s=null)=>{j(s),b(s?{floor:s.floor,shelf_number:s.shelf_number,description:s.description||""}:{floor:"",shelf_number:"",description:""}),v({}),h(!0)},T=()=>{const s={};return l.floor.trim()||(s.floor="Floor is required"),l.shelf_number.trim()||(s.shelf_number="Shelf number is required"),v(s),Object.keys(s).length===0},F=()=>{T()&&(d(!0),c?m.put(route("admin.shelves.update",c.id),l,{onSuccess:()=>{h(!1),j(null),d(!1)},onError:s=>{Object.values(s).forEach(r=>x("error",r)),d(!1)}}):m.post(route("admin.shelves.store"),l,{onSuccess:()=>{h(!1),d(!1)},onError:s=>{Object.values(s).forEach(r=>x("error",r)),d(!1)}}))},L=s=>{_(s),u(!0)},q=()=>{o&&m.delete(route("admin.shelves.destroy",o.id),{onSuccess:()=>{u(!1),_(null)},onError:s=>{Object.values(s).forEach(r=>x("error",r)),u(!1)}})};return e.jsxs(U,{breadcrumbs:V,children:[e.jsx(B,{title:"Manage Locations"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto p-4",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col items-center justify-between sm:flex-row",children:[e.jsxs("h1",{className:"mb-2 flex items-center gap-2 text-2xl font-bold text-gray-900",children:[e.jsx(S,{className:"h-6 w-6 text-blue-600"}),"Manage Locations"]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>E(),className:"flex items-center space-x-2 rounded-lg bg-green-600 px-4 py-2 text-white transition-colors hover:bg-green-700","aria-label":"Add new shelf",children:e.jsx("span",{children:"Add Shelf"})})})]}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Add, edit, or remove shelves from the library."})]}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by floor, shelf number, or description...",value:g,onChange:s=>C(s.target.value),onKeyPress:s=>s.key==="Enter"&&k(),className:"w-full rounded-lg border border-gray-300 py-2 pr-4 pl-10 transition-colors focus:border-blue-500 focus:ring-2 focus:ring-blue-500","aria-label":"Search shelves"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{C(""),k()},className:"w-full rounded-lg border border-gray-300 px-4 py-2 transition-colors hover:bg-gray-50","aria-label":"Clear filters",children:"Clear Filters"})})]})}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-200 p-6",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Shelves (",n.total,")"]})}),n.data.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Location"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Description"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Books"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:n.data.map(s=>e.jsxs("tr",{className:"transition-colors hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"mr-3 h-8 w-8 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.floor}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Shelf ",s.shelf_number]})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap text-gray-900",children:s.description||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap text-gray-900",children:s.book_count}),e.jsxs("td",{className:"px-6 py-4 text-sm font-medium whitespace-nowrap",children:[e.jsx("button",{onClick:()=>E(s),className:"mr-4 text-blue-600 transition-colors hover:text-blue-900","aria-label":`Edit shelf ${s.floor}, ${s.shelf_number}`,children:e.jsx(H,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>L(s),className:"text-red-600 transition-colors hover:text-red-900","aria-label":`Delete shelf ${s.floor}, ${s.shelf_number}`,children:e.jsx(J,{className:"h-4 w-4"})})]})]},s.id))})]})}):e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(S,{className:"mx-auto mb-3 h-12 w-12 text-gray-300"}),e.jsx("p",{children:"No shelves found."})]}),n.last_page>1&&e.jsx("div",{className:"flex justify-center space-x-2 p-6",children:n.links.map((s,r)=>e.jsx("button",{onClick:()=>P(s.url),className:`rounded-lg px-4 py-2 ${s.active?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} transition-colors`,disabled:!s.url,"aria-label":s.label==="« Previous"?"Previous page":s.label==="Next »"?"Next page":`Go to page ${s.label}`,children:s.label==="« Previous"?"Previous":s.label==="Next »"?"Next":s.label},r))})]}),D&&e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold text-gray-900",children:c?"Edit Shelf":"Add Shelf"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Floor"}),e.jsx("input",{type:"text",value:l.floor,onChange:s=>b({...l,floor:s.target.value}),className:`w-full rounded-lg border px-3 py-2 transition-colors focus:border-blue-500 focus:ring-2 focus:ring-blue-500 ${i.floor||t.floor?"border-red-500":"border-gray-300"}`,"aria-label":"Shelf floor"}),(i.floor||t.floor)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.floor||t.floor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Shelf Number"}),e.jsx("input",{type:"text",value:l.shelf_number,onChange:s=>b({...l,shelf_number:s.target.value}),className:`w-full rounded-lg border px-3 py-2 transition-colors focus:border-blue-500 focus:ring-2 focus:ring-blue-500 ${i.shelf_number||t.shelf_number?"border-red-500":"border-gray-300"}`,"aria-label":"Shelf number"}),(i.shelf_number||t.shelf_number)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.shelf_number||t.shelf_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("input",{type:"text",value:l.description,onChange:s=>b({...l,description:s.target.value}),className:"w-full rounded-lg border border-gray-300 px-3 py-2 transition-colors focus:border-blue-500 focus:ring-2 focus:ring-blue-500","aria-label":"Shelf description"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{h(!1),j(null),v({})},className:"rounded-lg border border-gray-300 px-4 py-2 transition-colors hover:bg-gray-50","aria-label":"Cancel",children:"Cancel"}),e.jsx("button",{onClick:F,disabled:N,className:`rounded-lg px-4 py-2 text-white transition-colors ${N?"cursor-not-allowed bg-blue-400":"bg-blue-600 hover:bg-blue-700"}`,"aria-label":c?"Update shelf":"Add shelf",children:N?"Submitting...":c?"Update":"Add"})]})]})}),M&&o&&e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold text-gray-900",children:"Confirm Delete"}),e.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete"," ",e.jsxs("span",{className:"font-semibold",children:[o.floor,", Shelf ",o.shelf_number]}),"? Books assigned to this shelf will be unassigned."]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>u(!1),className:"rounded-lg border border-gray-300 px-4 py-2 transition-colors hover:bg-gray-50","aria-label":"Cancel delete",children:"Cancel"}),e.jsx("button",{onClick:q,className:"rounded-lg bg-red-600 px-4 py-2 text-white transition-colors hover:bg-red-700","aria-label":`Delete shelf ${o.floor}, ${o.shelf_number}`,children:"Delete"})]})]})}),e.jsx("div",{className:"fixed right-4 bottom-4 z-50 space-y-2",children:A.map(s=>e.jsxs("div",{className:`flex max-w-sm items-center space-x-3 rounded-lg border px-4 py-3 shadow-lg ${s.type==="success"?"border-green-200 bg-green-50 text-green-800":"border-red-200 bg-red-50 text-red-800"}`,children:[s.type==="success"&&e.jsx("div",{className:"h-5 w-5 text-green-600",children:"✔"}),s.type==="error"&&e.jsx(G,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"text-sm font-medium",children:s.message}),e.jsx("button",{onClick:()=>O(s.id),className:"text-gray-400 hover:text-gray-600","aria-label":"Close toast notification",children:"×"})]},s.id))})]})]})}export{oe as default};
