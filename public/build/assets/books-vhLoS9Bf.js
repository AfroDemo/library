import{q as U,r,j as e,$ as M,m}from"./app-KiXo_k_h.js";import{A as P,T as L}from"./app-layout-BgEcNBAK.js";import{B as v}from"./chevron-right-BS6E1_9l.js";import{D as R}from"./download-BbFRm73X.js";import{S as F}from"./search-CQzR3Gfu.js";import{S as q}from"./square-pen-BsI8kB69.js";import{T as z}from"./trash-2-TKtrlBCO.js";import"./app-logo-icon-DguhPrG2.js";import"./index-qTwxiHtT.js";import"./index-Dz0iKmGF.js";import"./createLucideIcon-D1T_WgAe.js";const V=[{title:"Dashboard",href:"/dashboard"},{title:"Manage Books",href:"/admin/books"}];function ae(){const{books:i,filters:y,errors:u,success:h}=U().props,[p,N]=r.useState(y.search||""),[g,w]=r.useState(y.available||""),[B,f]=r.useState([]),[A,b]=r.useState(!1),[d,k]=r.useState(null),[s,n]=r.useState({title:"",author:"",isbn:"",available:!0});r.useEffect(()=>{h&&S("success",h),u&&Object.values(u).length>0&&Object.values(u).forEach(a=>S("error",a))},[h,u]);const S=(a,t)=>{const o=Date.now().toString();f(c=>[...c,{type:a,message:t,id:o}]),setTimeout(()=>f(c=>c.filter(x=>x.id!==o)),5e3)},E=a=>{f(t=>t.filter(o=>o.id!==a))},j=()=>{m.get(route("admin.books.index"),{search:p,available:g},{preserveState:!0,replace:!0})},T=a=>{a&&m.get(a,{search:p,available:g},{preserveState:!0})},$=()=>{const t=[["ID","Title","Author","ISBN","Available"],...i.data.map(l=>[l.id,l.title,l.author,l.isbn,l.available?"Yes":"No"])].map(l=>l.map(O=>`"${O}"`).join(",")).join(`
`),o=new Blob([t],{type:"text/csv"}),c=window.URL.createObjectURL(o),x=document.createElement("a");x.href=c,x.download=`books_${new Date().toISOString().split("T")[0]}.csv`,x.click(),window.URL.revokeObjectURL(c)},C=(a=null)=>{k(a),n(a?{title:a.title,author:a.author,isbn:a.isbn,available:a.available}:{title:"",author:"",isbn:"",available:!0}),b(!0)},D=()=>{d?m.put(route("admin.books.update",d.id),s,{onSuccess:()=>{b(!1),k(null)}}):m.post(route("admin.books.store"),s,{onSuccess:()=>b(!1)})},I=a=>{confirm("Are you sure you want to delete this book?")&&m.delete(route("admin.books.destroy",a.id))};return e.jsxs(P,{breadcrumbs:V,children:[e.jsx(M,{title:"Manage Books"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"mb-2 flex items-center gap-2 text-2xl font-bold text-gray-900",children:[e.jsx(v,{className:"h-6 w-6 text-blue-600"}),"Manage Books"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:$,className:"flex items-center space-x-2 rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700","aria-label":"Export books as CSV",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:"Export CSV"})]}),e.jsx("button",{onClick:()=>C(),className:"flex items-center space-x-2 rounded-lg bg-green-600 px-4 py-2 text-white hover:bg-green-700","aria-label":"Add new book",children:e.jsx("span",{children:"Add Book"})})]})]}),e.jsx("p",{className:"text-gray-600",children:"Add, edit, or remove books from the library collection."})]}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by title, author, or ISBN...",value:p,onChange:a=>N(a.target.value),onKeyPress:a=>a.key==="Enter"&&j(),className:"w-full rounded-lg border border-gray-300 py-2 pr-4 pl-10 focus:border-blue-500 focus:ring-2 focus:ring-blue-500","aria-label":"Search books"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Availability"}),e.jsxs("select",{value:g,onChange:a=>{w(a.target.value),j()},className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500","aria-label":"Filter by availability",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"true",children:"Available"}),e.jsx("option",{value:"false",children:"Unavailable"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{N(""),w(""),j()},className:"w-full rounded-lg border border-gray-300 px-4 py-2 hover:bg-gray-50","aria-label":"Clear filters",children:"Clear Filters"})})]})}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-200 p-6",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Books (",i.total,")"]})}),i.data.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Book"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:"ISBN"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:i.data.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:"mr-3 h-8 w-8 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.title}),e.jsx("div",{className:"text-sm text-gray-500",children:a.author})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap text-gray-900",children:a.isbn}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${a.available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.available?"Available":"Unavailable"})}),e.jsxs("td",{className:"px-6 py-4 text-sm font-medium whitespace-nowrap",children:[e.jsx("button",{onClick:()=>C(a),className:"mr-4 text-blue-600 hover:text-blue-900","aria-label":`Edit book ${a.title}`,children:e.jsx(q,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>I(a),className:"text-red-600 hover:text-red-900","aria-label":`Delete book ${a.title}`,children:e.jsx(z,{className:"h-4 w-4"})})]})]},a.id))})]})}):e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(v,{className:"mx-auto mb-3 h-12 w-12 text-gray-300"}),e.jsx("p",{children:"No books found."})]}),i.last_page>1&&e.jsx("div",{className:"flex justify-center space-x-2 p-6",children:i.links.map((a,t)=>e.jsx("button",{onClick:()=>T(a.url),className:`rounded-lg px-4 py-2 ${a.active?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,disabled:!a.url,"aria-label":a.label==="« Previous"?"Previous page":a.label==="Next »"?"Next page":`Go to page ${a.label}`,children:a.label==="« Previous"?"Previous":a.label==="Next »"?"Next":a.label},t))})]}),A&&e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold text-gray-900",children:d?"Edit Book":"Add Book"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",value:s.title,onChange:a=>n({...s,title:a.target.value}),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500","aria-label":"Book title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Author"}),e.jsx("input",{type:"text",value:s.author,onChange:a=>n({...s,author:a.target.value}),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500","aria-label":"Book author"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ISBN"}),e.jsx("input",{type:"text",value:s.isbn,onChange:a=>n({...s,isbn:a.target.value}),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500","aria-label":"Book ISBN"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:s.available,onChange:a=>n({...s,available:a.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500","aria-label":"Book availability"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Available"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>b(!1),className:"rounded-lg border border-gray-300 px-4 py-2 hover:bg-gray-50","aria-label":"Cancel",children:"Cancel"}),e.jsx("button",{onClick:D,className:"rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700","aria-label":d?"Update book":"Add book",children:d?"Update":"Add"})]})]})}),e.jsx("div",{className:"fixed right-4 bottom-4 z-50 space-y-2",children:B.map(a=>e.jsxs("div",{className:`flex max-w-sm items-center space-x-3 rounded-lg border px-4 py-3 shadow-lg ${a.type==="success"?"border-green-200 bg-green-50 text-green-800":"border-red-200 bg-red-50 text-red-800"}`,children:[a.type==="success"&&e.jsx("div",{className:"h-5 w-5 text-green-600",children:"✔"}),a.type==="error"&&e.jsx(L,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"text-sm font-medium",children:a.message}),e.jsx("button",{onClick:()=>E(a.id),className:"text-gray-400 hover:text-gray-600","aria-label":"Close toast notification",children:"×"})]},a.id))})]})]})}export{ae as default};
