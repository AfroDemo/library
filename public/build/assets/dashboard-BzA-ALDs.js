import{q as g,r as a,j as e,$ as N}from"./app-KiXo_k_h.js";import{A as p,U as f,T as w}from"./app-layout-BgEcNBAK.js";import{B as d}from"./chevron-right-BS6E1_9l.js";import{C as m}from"./calendar-D8t0BAEn.js";import{C as l}from"./clock-m8ZAyMD4.js";import{C as x}from"./circle-check-big-C2iU3hMD.js";import{S as y}from"./search-CQzR3Gfu.js";import"./app-logo-icon-DguhPrG2.js";import"./index-qTwxiHtT.js";import"./index-Dz0iKmGF.js";import"./createLucideIcon-D1T_WgAe.js";const v=[{title:"My Library",href:"/user"},{title:"Dashboard",href:"/user/dashboard"}];function R(){const{auth:i,stats:h={},transactions:j=[]}=g().props,[t,k]=a.useState(j),[r,B]=a.useState(h),[b,S]=a.useState(!1),o=s=>new Date(s).toLocaleDateString(),c=s=>{var n;return new Date(s)<new Date&&!((n=t.find(u=>u.due_date===s))!=null&&n.returned_at)};return e.jsxs(p,{breadcrumbs:v,children:[e.jsx(N,{title:"My Dashboard"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx("div",{className:"rounded-lg bg-gradient-to-r from-blue-500 to-purple-600 p-6 text-white shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"rounded-full bg-white/20 p-3",children:e.jsx(f,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome back, ",i.user.name,"!"]}),e.jsxs("p",{className:"text-blue-100",children:[i.user.role==="student"?"Student":"Staff"," â€¢ Library Member"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Books Borrowed"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.myBorrowedBooks??0})]}),e.jsx(d,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Borrowed Books"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:r.activeLoans??0})]}),e.jsx(m,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue Books"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:r.overdueBooks??0})]}),e.jsx(l,{className:"h-8 w-8 text-red-600"})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Returned Books"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.returnedBooks??0})]}),e.jsx(x,{className:"h-8 w-8 text-gray-600"})]})})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-200 p-6",children:e.jsxs("h2",{className:"flex items-center text-lg font-semibold text-gray-900",children:[e.jsx(d,{className:"mr-2 h-5 w-5 text-blue-600"}),"Currently Borrowed Books"]})}),e.jsx("div",{className:"p-6",children:b?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("div",{className:"mx-auto h-8 w-8 animate-spin rounded-full border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading your books..."})]}):t.filter(s=>!s.returned_at).length>0?e.jsx("div",{className:"space-y-4",children:t.filter(s=>!s.returned_at).map(s=>e.jsx("div",{className:`rounded-lg border p-4 ${c(s.due_date)?"border-red-200 bg-red-50":"border-gray-200 bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.book_title}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(m,{className:"mr-2 h-4 w-4"}),e.jsxs("span",{children:["Borrowed: ",o(s.borrowed_at)]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{className:"mr-2 h-4 w-4"}),e.jsxs("span",{children:["Due: ",o(s.due_date)]})]})]})]}),e.jsx("div",{className:"ml-4",children:c(s.due_date)?e.jsxs("div",{className:"flex items-center text-red-600",children:[e.jsx(w,{className:"mr-1 h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Overdue"})]}):e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(x,{className:"mr-1 h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Active"})]})})]})},s.id))}):e.jsxs("div",{className:"py-8 text-center text-gray-500",children:[e.jsx(d,{className:"mx-auto mb-3 h-12 w-12 text-gray-300"}),e.jsx("p",{children:"You don't have any books currently borrowed."}),e.jsx("p",{className:"mt-1 text-sm",children:"Visit the library to borrow some books!"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx("a",{href:"/user/search",className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm transition-shadow hover:shadow-md",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Search Books"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Find books in the library catalog"})]})]})}),e.jsx("a",{href:"/user/history",className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm transition-shadow hover:shadow-md",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(l,{className:"h-8 w-8 text-gray-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Borrowing History"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View your complete borrowing history"})]})]})})]})]})]})}export{R as default};
