import{q as O,r as d,j as e,$ as P,m}from"./app-DCuZLIiR.js";import{A as U,T as D}from"./app-layout-CxSrBOU3.js";import{U as w}from"./user-check-gT2IIRzb.js";import{D as R}from"./download-BkUYoEL1.js";import{S as F}from"./search-BSJJuXeU.js";import{S as I}from"./square-pen-B8CwlUIa.js";import{T as q}from"./trash-2-Cb7_oVag.js";import"./app-logo-icon-l4AutvGA.js";import"./index-DWDx7uJa.js";import"./index-Bq50F9d8.js";import"./createLucideIcon-B80Gj0Dh.js";import"./chevron-right-MvP6eIpt.js";const z=[{title:"Admin",href:"/admin"},{title:"Manage Librarians",href:"/admin/librarians"}];function ee(){const{librarians:t,filters:C,errors:x,success:u}=O().props,[g,f]=d.useState(C.search||""),[S,h]=d.useState([]),[L,b]=d.useState(!1),[l,y]=d.useState(null),[s,p]=d.useState({name:"",email:"",password:""});d.useEffect(()=>{u&&j("success",u),x&&Object.values(x).length>0&&Object.values(x).forEach(a=>j("error",a))},[u,x]);const j=(a,r)=>{const i=Date.now().toString();h(n=>[...n,{type:a,message:r,id:i}]),setTimeout(()=>h(n=>n.filter(o=>o.id!==i)),5e3)},k=a=>{h(r=>r.filter(i=>i.id!==a))},N=()=>{m.get(route("admin.librarians.index"),{search:g},{preserveState:!0,replace:!0})},E=a=>{a&&m.get(a,{search:g},{preserveState:!0})},A=()=>{const r=[["ID","Name","Email"],...t.data.map(c=>[c.id,c.name,c.email])].map(c=>c.map(M=>`"${M}"`).join(",")).join(`
`),i=new Blob([r],{type:"text/csv"}),n=window.URL.createObjectURL(i),o=document.createElement("a");o.href=n,o.download=`librarians_${new Date().toISOString().split("T")[0]}.csv`,o.click(),window.URL.revokeObjectURL(n)},v=(a=null)=>{y(a),p(a?{name:a.name,email:a.email,password:""}:{name:"",email:"",password:""}),b(!0)},T=()=>{const a={...s};a.password||delete a.password,l?m.put(route("admin.librarians.update",l.id),a,{onSuccess:()=>{b(!1),y(null)}}):m.post(route("admin.librarians.store"),a,{onSuccess:()=>b(!1)})},$=a=>{confirm("Are you sure you want to delete this librarian?")&&m.delete(route("admin.librarians.destroy",a.id))};return e.jsxs(U,{breadcrumbs:z,children:[e.jsx(P,{title:"Manage Librarians"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx(w,{className:"h-6 w-6 text-blue-600"}),"Manage Librarians"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:A,className:"flex items-center space-x-2 rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700","aria-label":"Export librarians as CSV",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:"Export CSV"})]}),e.jsx("button",{onClick:()=>v(),className:"flex items-center space-x-2 rounded-lg bg-green-600 px-4 py-2 text-white hover:bg-green-700","aria-label":"Add new librarian",children:e.jsx("span",{children:"Add Librarian"})})]})]}),e.jsx("p",{className:"text-gray-600",children:"Manage librarian accounts for the library system."})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:g,onChange:a=>f(a.target.value),onKeyPress:a=>a.key==="Enter"&&N(),className:"w-full rounded-lg border border-gray-300 py-2 pr-4 pl-10 focus:border-blue-500 focus:ring-2 focus:ring-blue-500","aria-label":"Search librarians"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{f(""),N()},className:"w-full rounded-lg border border-gray-300 px-4 py-2 hover:bg-gray-50","aria-label":"Clear filters",children:"Clear Filters"})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200 p-6",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Librarians (",t.total,")"]})}),t.data.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:t.data.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:a.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.email}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>v(a),className:"text-blue-600 hover:text-blue-900 mr-4","aria-label":`Edit librarian ${a.name}`,children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>$(a),className:"text-red-600 hover:text-red-900","aria-label":`Delete librarian ${a.name}`,children:e.jsx(q,{className:"h-4 w-4"})})]})]},a.id))})]})}):e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(w,{className:"mx-auto mb-3 h-12 w-12 text-gray-300"}),e.jsx("p",{children:"No librarians found."})]}),t.last_page>1&&e.jsx("div",{className:"flex justify-center space-x-2 p-6",children:t.links.map((a,r)=>e.jsx("button",{onClick:()=>E(a.url),className:`px-4 py-2 rounded-lg ${a.active?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,disabled:!a.url,"aria-label":a.label==="« Previous"?"Previous page":a.label==="Next »"?"Next page":`Go to page ${a.label}`,children:a.label==="« Previous"?"Previous":a.label==="Next »"?"Next":a.label},r))})]}),L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:l?"Edit Librarian":"Add Librarian"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",value:s.name,onChange:a=>p({...s,name:a.target.value}),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500","aria-label":"Librarian name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",value:s.email,onChange:a=>p({...s,email:a.target.value}),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500","aria-label":"Librarian email"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Password ",l?"(Optional)":""]}),e.jsx("input",{type:"password",value:s.password,onChange:a=>p({...s,password:a.target.value}),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500","aria-label":"Librarian password"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50","aria-label":"Cancel",children:"Cancel"}),e.jsx("button",{onClick:T,className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700","aria-label":l?"Update librarian":"Add librarian",children:l?"Update":"Add"})]})]})}),e.jsx("div",{className:"fixed right-4 bottom-4 z-50 space-y-2",children:S.map(a=>e.jsxs("div",{className:`flex max-w-sm items-center space-x-3 rounded-lg border px-4 py-3 shadow-lg ${a.type==="success"?"border-green-200 bg-green-50 text-green-800":"border-red-200 bg-red-50 text-red-800"}`,children:[a.type==="success"&&e.jsx("div",{className:"h-5 w-5 text-green-600",children:"✔"}),a.type==="error"&&e.jsx(D,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"text-sm font-medium",children:a.message}),e.jsx("button",{onClick:()=>k(a.id),className:"text-gray-400 hover:text-gray-600","aria-label":"Close toast notification",children:"×"})]},a.id))})]})]})}export{ee as default};
