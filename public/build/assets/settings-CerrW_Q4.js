import{q as v,r as o,j as e,$ as _,m as N}from"./app-DCuZLIiR.js";import{A as S,S as w,T as k}from"./app-layout-CxSrBOU3.js";import{c as C}from"./createLucideIcon-B80Gj0Dh.js";import{C as E}from"./circle-check-big-Opi59qMb.js";import"./app-logo-icon-l4AutvGA.js";import"./index-DWDx7uJa.js";import"./index-Bq50F9d8.js";import"./chevron-right-MvP6eIpt.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],T=C("Info",L),I=[{title:"Admin",href:"/admin"},{title:"Settings",href:"/admin/settings"}];function q(){const{settings:l,errors:a,success:d}=v().props,[n,p]=o.useState({loan_duration_days:l.loan_duration_days,max_books_per_user:l.max_books_per_user,overdue_fine_per_day:l.overdue_fine_per_day}),[f,c]=o.useState([]),[u,m]=o.useState(!1);o.useEffect(()=>{d&&i("success",d),a&&Object.values(a).length>0&&Object.values(a).forEach(s=>i("error",s))},[d,a]);const i=(s,r)=>{const t=Date.now().toString(),g={type:s,message:r,id:t};c(b=>[...b,g]),setTimeout(()=>{c(b=>b.filter(j=>j.id!==t))},5e3)},h=s=>{c(r=>r.filter(t=>t.id!==s))},x=s=>{const{name:r,value:t}=s.target;p(g=>({...g,[r]:r==="overdue_fine_per_day"?parseFloat(t):parseInt(t,10)}))},y=()=>{m(!0),N.post("/admin/settings",n,{onSuccess:()=>{i("success","Settings updated successfully"),m(!1)},onError:s=>{Object.values(s).forEach(r=>i("error",r)),m(!1)}})};return e.jsxs(S,{breadcrumbs:I,children:[e.jsx(_,{title:"Library Settings"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx("div",{className:"rounded-lg bg-gradient-to-r from-blue-500 to-purple-600 p-6 text-white shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"rounded-full bg-white/20 p-3",children:e.jsx(w,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Library Settings"}),e.jsx("p",{className:"text-blue-100",children:"Manage loan policies and fine settings"})]})]})}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:"General Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Loan Duration (days)"}),e.jsx("input",{type:"number",name:"loan_duration_days",value:n.loan_duration_days,onChange:x,min:"1",className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500","aria-label":"Loan duration in days"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Max Books Per User"}),e.jsx("input",{type:"number",name:"max_books_per_user",value:n.max_books_per_user,onChange:x,min:"1",className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500","aria-label":"Maximum books per user"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Overdue Fine Per Day ($)"}),e.jsx("input",{type:"number",name:"overdue_fine_per_day",value:n.overdue_fine_per_day,onChange:x,min:"0",step:"0.01",className:"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500","aria-label":"Overdue fine per day"}),e.jsxs("p",{className:"mt-1 flex items-center text-sm text-gray-500",children:[e.jsx(T,{className:"mr-1 h-4 w-4"}),"Changing this will update existing unpaid fines for overdue books overnight."]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:y,disabled:u,className:`rounded-lg px-4 py-2 text-white ${u?"cursor-not-allowed bg-gray-400":"bg-blue-600 hover:bg-blue-700"}`,"aria-label":"Save settings",children:u?"Saving...":"Save Settings"})})]})]}),e.jsx("div",{className:"fixed right-4 bottom-4 z-50 space-y-2",children:f.map(s=>e.jsxs("div",{className:`flex max-w-sm items-center space-x-3 rounded-lg border px-4 py-3 shadow-lg ${s.type==="success"?"border-green-200 bg-green-50 text-green-800":"border-red-200 bg-red-50 text-red-800"}`,children:[s.type==="success"&&e.jsx(E,{className:"h-5 w-5 text-green-600"}),s.type==="error"&&e.jsx(k,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"text-sm font-medium",children:s.message}),e.jsx("button",{onClick:()=>h(s.id),className:"text-gray-400 hover:text-gray-600","aria-label":"Close toast notification",children:"Ã—"})]},s.id))})]})]})}export{q as default};
